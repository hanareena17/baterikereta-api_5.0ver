<ion-content class="ion-padding main-bg" fullscreen="true">

  <!-- USER PROFILE SECTION -->
  <div class="header-container" (click)="goToProfile()" style="cursor: pointer;">
    <ion-avatar slot="start">
      <img src="assets/profile.png" *ngIf="user?.profileImage; else defaultProfile" />
      <ng-template #defaultProfile>
        <img src="https://i.pravatar.cc/100" />
      </ng-template>
    </ion-avatar>
    <div>
      <h2>Welcome, <span class="username">{{ user?.name || 'Guest' }}</span></h2>
      <p>Points: {{ user?.points || '1000' }}</p>
    </div>
  </div>

  <!-- PROMO BANNER (admin will upload) -->
  <ion-card class="promo-card" *ngIf="promoBanner; else noPromo">
    <img [src]="promoBanner" class="promo-img" />
  </ion-card>
  <ng-template #noPromo>
    <div class="promo-card no-promo">
      <p>No promo at the moment</p>
    </div>
  </ng-template>

  

  <!--booking service-->
  <ion-card class="action-card" (click)="goToBooking()">
    <ion-item lines="none">
      <ion-icon name="calendar-outline" slot="start"></ion-icon>
      <ion-label>
        <h2>Book a Service</h2>
        <p>Make a quick appointment</p>
      </ion-label>
    </ion-item>
  </ion-card>

    <!--redeem points-->
  <ion-card class="action-card" (click)="goToRedeem()">
    <ion-item lines="none">
      <ion-icon name="gift-outline" slot="start"></ion-icon>
      <ion-label>
        <h2>Redeem Points</h2>
        <p>Use your points for discounts!</p>
      </ion-label>
    </ion-item>
  </ion-card>
  
  <!--track technician-->
  <ion-card class="action-card" (click)="goToTechnicianTracker()">
    <ion-item lines="none">
      <ion-icon name="navigate-outline" slot="start"></ion-icon>
      <ion-label>
        <h2>Track Technician</h2>
        <p>See where your assigned tech is</p>
      </ion-label>
    </ion-item>
  </ion-card>

  <!--view history-->
<ion-card class="action-card" (click)="goToHistory()">
  <ion-item lines="none">
    <ion-icon name="time-outline" slot="start"></ion-icon>
    <ion-label>
      <h2>View History</h2>
      <p>See your previous orders</p>
    </ion-label>
  </ion-item>
</ion-card>

  
  <!-- view cart
  <ion-fab vertical="bottom" horizontal="end" slot="fixed">
    <ion-fab-button color="warning" (click)="goToCart()">
      <ion-icon name="cart-outline"></ion-icon>
    </ion-fab-button>
  </ion-fab>
   -->

<!-- Nearby Outlets Section -->
<div class="section-header">
  <h3>Nearby Outlets</h3>
  <span class="view-more" (click)="navigateToAllOutlets()">More</span>
</div>

<div class="scroll-row">
  <div class="outlet-row" *ngFor="let outlet of outlets.slice(0, 4)"> <!-- .slice(0, 4) yang tu dia akan cuma paparkan 4 gambar sahaja -->
    <img [src]="outlet.img" class="outlet-img" />
    <div class="outlet-details">
      <h4>{{ outlet.name }}</h4>
      <p>{{ outlet.address }}</p>
    </div>
  </div>
</div>


<!-- Battery Section -->
<div class="section-header">
  <h3>Battery</h3>
</div>

<div class="scroll-row">
  <div class="battery-card" *ngFor="let battery of batteries">
    <img [src]="battery.img" class="battery-img" />
    <div class="battery-name">
      <h4>{{ battery.name }}</h4>
    </div>
  </div>
</div>

  <!-- CUSTOM BOTTOM NAVIGATION -->
  <div class="bottom-nav-custom">
    <div class="nav-item">
      <div class="icon-circle">
        <img src="assets/battery.svg" style="width: 20px;" />      </div>
      <span>Battery</span>
    </div>
    <div class="nav-item">
      <div class="icon-circle">
        <ion-icon name="time-outline"></ion-icon>
      </div>
      <span>History</span>
    </div>
    <a href="tel:0123456789" class="call-button">
      <ion-icon name="call-outline"></ion-icon>
    </a>
    <div class="nav-item">
      <div class="icon-circle">
        <ion-icon name="chatbubble-ellipses-outline"></ion-icon>
      </div>
      <span>Chat</span>
    </div>
    <div class="nav-item">
      <div class="icon-circle">
        <ion-icon name="shield-checkmark-outline"></ion-icon>
      </div>
      <span>Warranty</span>
    </div>
  </div>

</ion-content>
